(function(e){function t(t){for(var a,r,s=t[0],l=t[1],c=t[2],d=0,m=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&m.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,r=1;r<o.length;r++){var l=o[r];0!==n[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},n={1:0},i=[];function r(e){return s.p+"js/"+({}[e]||e)+"."+{2:"82ac2ca8",3:"23a481fd",4:"b8a197e1",5:"99303610",6:"8ae18d2c",7:"2423b77c"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,a){o=n[e]=[t,a]}));t.push(o[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=r(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var o=n[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,o[1](c)}n[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;i.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"2f39":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("5319"),o("7d6e"),o("e54f"),o("985d"),o("31cd");var a=o("2b0e"),n=o("a745"),i=o("42d2"),r=o("b05d"),s=o("436b"),l=o("2a19"),c=o("1b3f");a["a"].use(r["a"],{config:{loadingBar:{color:"warning",size:"4px"}},lang:n["a"],iconSet:i["a"],plugins:{Dialog:s["a"],Notify:l["a"],LoadingBar:c["a"]}});var d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},u=[],m=o("ded3"),p=o.n(m),h=o("2f62"),f=o("260b"),g={methods:p()(p()({},Object(h["b"])("auth",["handleAuthStateChanged","logoutUser"])),Object(h["b"])("movimenti",["firestoreStopGettingMovimenti"])),mounted(){f["a"].auth().setPersistence(f["a"].auth.Auth.Persistence.SESSION).then((()=>this.handleAuthStateChanged())).catch((e=>console.error(e.message)))},beforeDestroy(){this.firestoreStopGettingMovimenti()}},v=g,b=o("2877"),S=Object(b["a"])(v,d,u,!1,null,null,null),w=S.exports,y=(o("ea7b"),o("e71f"),{apiKey:"AIzaSyC-YNdahqcU3YSBeDv3bbALyKTU5IUrPyY",authDomain:"account-manager-25e69.firebaseapp.com",projectId:"account-manager-25e69",storageBucket:"account-manager-25e69.appspot.com",messagingSenderId:"28082462276",appId:"1:28082462276:web:2da1066ebfc3ddd9e3a611"});const D=f["a"].initializeApp(y),P=D.auth(),T=D.firestore();let M=null;const O={userDetails:{}},U={setUserDetails(e,t){e.userDetails=t},updateUser(e,t){Object.assign(e.userDetails,t)}},j={registerUser({},e){return new Promise(((t,o)=>{P.createUserWithEmailAndPassword(e.email,e.password).then((a=>{let n=P.currentUser.uid;T.collection("users").doc(n).set({nome:e.nome,email:e.email,saldo:0,saldoTotale:0}).then((()=>t("Registrazione effettuata con successo"))).catch((e=>o(e.message)))})).catch((e=>o(e.message)))}))},loginUser({},e){return new Promise(((t,o)=>{P.signInWithEmailAndPassword(e.email,e.password).then((e=>t("Accesso effettuato"))).catch((e=>o(e.message)))}))},logoutUser({}){P.signOut()},handleAuthStateChanged({commit:e}){P.onAuthStateChanged((t=>{if(t){let t=P.currentUser.uid;T.collection("users").doc(t).get().then((o=>{if(o.exists){const a=o.data();e("setUserDetails",{nome:a.nome,email:a.email,userId:t,saldo:a.saldo,saldoTotale:a.saldoTotale}),this.$router.push({name:"listaMovimenti"}).catch((()=>{}))}})).catch((e=>console.log(e.message)))}else e("setUserDetails",{}),M&&M(),this.$router.replace("/auth").catch((()=>{}))}))},updateSaldo({commit:e,state:t}){let o=P.currentUser.uid;T.collection("users").doc(o).get().then((t=>e("updateUser",t.data()))).catch((e=>console.log("Errore nell'aggiornamento saldo")))}},I={isLoggedIn(e){return e.userDetails.userId},saldo(e){return e.userDetails.saldo},saldoTotale(e){return e.userDetails.saldoTotale},saldoPersonale(e){return e.userDetails.saldoTotale-e.userDetails.saldo}};var G={namespaced:!0,state:O,mutations:U,actions:j,getters:I},A=o("4506");let B=null,L=null;const x=10,E={movimenti:{},limite:x},C={addMovimento(e,t){a["a"].set(e.movimenti,t.movimentoId,t.movimentoDetails)},updateMovimento(e,t){Object.assign(e.movimenti[t.movimentoId],t.movimentoDetails)},deleteMovimento(e,t){a["a"].delete(e.movimenti,t)},clearMovimenti(e){e.movimenti={},B=null,L=null},setLimite(e,t){e.limite=t},resetLimite(e){e.limite=x}},_={firestoreGetMovimenti({state:e,commit:t,rootGetters:o}){return new Promise(((a,n)=>{const i=o["auth/isLoggedIn"];B=T.collection("users").doc(i).collection("movimenti").orderBy("data","desc").limit(e.limite),L=B.onSnapshot((e=>{e.empty||e.forEach((e=>{const o=e.id;let a=e.data();a.data=e.data().data.toDate(),a.id=o,t("addMovimento",{movimentoId:o,movimentoDetails:a})})),a("Dati recuperati")}),(e=>{n(e.message)}))}))},firestoreStopGettingMovimenti({commit:e}){L&&(L(),e("clearMovimenti"),e("resetLimite"))},firestoreSaveMovimento({rootGetters:e,dispatch:t},o){return new Promise(((a,n)=>{let i=P.currentUser.uid,r=o;r=Object(A["a"])(r);const s=r.entrata-r.uscita,l=e["auth/saldo"],c=l+s;T.collection("users").doc(i).collection("movimenti").add(r).then((()=>{T.collection("users").doc(i).update({saldo:c}).then((()=>{t("auth/updateSaldo",null,{root:!0}),a("Movimento salvato")})).catch((e=>n(e.message)))})).catch((e=>n(e.message)))}))},firestoreAggiornaMovimento({state:e,rootGetters:t,dispatch:o},a){return new Promise(((n,i)=>{let r=P.currentUser.uid,s=a;const l=s.id,c=e.movimenti[l],d=c.entrata-c.uscita;s=Object(A["a"])(s);const u=s.entrata-s.uscita,m=t["auth/saldo"],p=m-d+u;T.collection("users").doc(r).collection("movimenti").doc(l).update(s).then((()=>{T.collection("users").doc(r).update({saldo:p}).then((()=>{o("auth/updateSaldo",null,{root:!0}),n("Movimento aggiornato")})).catch((e=>i(e.message)))})).catch((e=>i(e.message)))}))},firestoreDeleteMovimento({commit:e,state:t,rootGetters:o,dispatch:a},n){return new Promise(((i,r)=>{let s=P.currentUser.uid;const l=t.movimenti[n],c=l.entrata-l.uscita,d=o["auth/saldo"],u=d-c;T.collection("users").doc(s).collection("movimenti").doc(n).delete().then((t=>{T.collection("users").doc(s).update({saldo:u}).then((()=>{e("deleteMovimento",n),a("auth/updateSaldo",null,{root:!0}),i("Movimento Cancellato")})).catch((e=>r(e.message)))})).catch((e=>r(e.message)))}))},incrementLimite({state:e,commit:t,dispatch:o},a){return new Promise(((n,i)=>{const r=a?x:e.limite+x;o("firestoreStopGettingMovimenti"),t("setLimite",r),o("firestoreGetMovimenti").then((()=>{n()})).catch((()=>{i()}))}))}},q={};var N={namespaced:!0,state:E,mutations:C,actions:_,getters:q};let Y=null,F=null;const k={tipi:{}},z={addTipo(e,t){a["a"].set(e.tipi,t.tipoId,t.tipoDetails)},updateTipo(e,t){Object.assign(e.tipi[t.tipoId],t.tipoDetails)},deleteTipo(e,t){a["a"].delete(e.tipi,t.tipoId)},clearTipi(e){e.tipi={},Y=null,F=null}},V={firestoreGetTipi({commit:e,rootGetters:t}){const o=t["auth/isLoggedIn"];Y=T.collection("users").doc(o).collection("tipi").orderBy("nome"),F=Y.onSnapshot((t=>{t.empty||t.forEach((t=>{const o=t.id;let a=t.data();e("addTipo",{tipoId:o,tipoDetails:a})}))}))},firestoreStopGettingTipi({commit:e}){F&&(F(),e("clearTipi"))},firestoreSaveTipo({},e){let t=P.currentUser.uid;const o={nome:e};T.collection("users").doc(t).collection("tipi").add(o).then((e=>Object(A["c"])("Tipo Salvato"))).catch((e=>Object(A["c"])(e.message)))}},$={};var J={namespaced:!0,state:k,mutations:z,actions:V,getters:$};o("13d5");let K=null,W=null;const Q={saldi:{}},R={addSaldo(e,t){a["a"].set(e.saldi,t.saldoId,t.saldoDetails)},updateSaldo(e,t){Object.assign(e.saldi[t.saldoId],t.saldoDetails)},deleteSaldo(e,t){a["a"].delete(e.saldi,t)},clearSaldi(e){e.saldi={},K=null,W=null}},H={firestoreGetSaldi({commit:e,rootGetters:t}){return new Promise(((o,a)=>{const n=t["auth/isLoggedIn"];K=T.collection("users").doc(n).collection("saldi").orderBy("nome"),W=K.onSnapshot((t=>{t.empty||t.forEach((t=>{const o=t.id;let a=t.data();a.data=t.data().data.toDate(),a.id=o,e("addSaldo",{saldoId:o,saldoDetails:a})})),o("Dati recuperati")}),(e=>{a(e.message)}))}))},firestoreStopGettingSaldi({commit:e}){W&&(W(),e("clearSaldi"))},firestoreSaveSaldo({rootGetters:e,dispatch:t},o){return new Promise(((a,n)=>{let i=P.currentUser.uid,r=o;r=Object(A["b"])(r);const s=e["saldi/saldoTotale"]+r.value;console.log("FB Save nuovSld",s),T.collection("users").doc(i).collection("saldi").add(r).then((()=>{T.collection("users").doc(i).update({saldoTotale:s}).then((()=>{t("auth/updateSaldo",null,{root:!0}),a("Saldo aggiunto")})).catch((e=>n(e.message)))})).catch((e=>n(e.message)))}))},firestoreAggiornaSaldo({state:e,rootGetters:t,dispatch:o},a){return new Promise(((n,i)=>{let r=P.currentUser.uid,s=a;console.log("FB UPD saldoDetail",s);const l=s.id;console.log("FB UPD saldoId",l);const c=e.saldi[l].value;console.log("FB UPD oldSaldo",c),s=Object(A["b"])(s),console.log("FB UPD normal",s);const d=t["saldi/saldoTotale"]-c+s.value;console.log("FB UPD nuovSld",d),T.collection("users").doc(r).collection("saldi").doc(l).update(s).then((()=>{T.collection("users").doc(r).update({saldoTotale:d}).then((()=>{o("auth/updateSaldo",null,{root:!0}),n("Saldo aggiornato")})).catch((e=>i(e.message)))})).catch((e=>i(e.message)))}))},firestoreDeleteSaldo({commit:e,state:t,rootGetters:o,dispatch:a},n){return new Promise(((i,r)=>{let s=P.currentUser.uid;const l=t.saldi[n].value,c=o["saldi/saldoTotale"]-l;T.collection("users").doc(s).collection("saldi").doc(n).delete().then((t=>{T.collection("users").doc(s).update({saldoTotale:c}).then((()=>{e("deleteSaldo",n),a("auth/updateSaldo",null,{root:!0}),i("Saldo Cancellato")})).catch((e=>r(e.message)))})).catch((e=>r(e.message)))}))}},X={saldoTotale(e){return Object.values(e.saldi).map((e=>e.value)).reduce(((e,t)=>e+t),0)}};var Z={namespaced:!0,state:Q,mutations:R,actions:H,getters:X};a["a"].use(h["a"]);var ee=function(){const e=new h["a"].Store({modules:{auth:G,movimenti:N,tipi:J,saldi:Z},strict:!1});return e},te=o("8c4f");const oe=[{path:"/",component:()=>Promise.all([o.e(0),o.e(5)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(7)]).then(o.bind(null,"8b24")),name:"home"},{path:"auth",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"f724")),name:"auth"},{path:"listaMovimenti",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"2f3a")),name:"listaMovimenti",meta:{requiresAuth:!0}},{path:"listaSaldi",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"2637")),name:"listaSaldi",meta:{requiresAuth:!0}}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(6)]).then(o.bind(null,"e51e"))}];var ae=oe;a["a"].use(te["a"]);var ne=function(){const e=new te["a"]({scrollBehavior:()=>({x:0,y:0}),routes:ae,mode:"history",base:"/"});return e},ie=async function(){const e="function"===typeof ee?await ee({Vue:a["a"]}):ee,t="function"===typeof ne?await ne({Vue:a["a"],store:e}):ne;e.$router=t;const o={router:t,store:e,render:e=>e(w),el:"#q-app"};return{app:o,store:e,router:t}},re=({router:e,store:t,Vue:o})=>{e.beforeEach(((e,o,a)=>{const n=t.getters["auth/isLoggedIn"];e.matched.some((e=>e.meta.requiresAuth))&&!n?a({name:"auth",replace:!0}):a()}))};const se="/";async function le(){const{app:e,store:t,router:o}=await ie();let n=!1;const i=e=>{n=!0;const t=Object(e)===e?o.resolve(e).route.fullPath:e;window.location.href=t},r=window.location.href.replace(window.location.origin,""),s=[re,void 0];for(let c=0;!1===n&&c<s.length;c++)if("function"===typeof s[c])try{await s[c]({app:e,router:o,store:t,Vue:a["a"],ssrContext:null,redirect:i,urlPath:r,publicPath:se})}catch(l){return l&&l.url?void(window.location.href=l.url):void console.error("[Quasar] boot error:",l)}!0!==n&&new a["a"](e)}le()},"31cd":function(e,t,o){},4506:function(e,t,o){"use strict";o.d(t,"a",(function(){return r})),o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return c}));o("5319");var a=o("260b"),n=o("bd4c"),i=o("2a19");const r=e=>{delete e.id;const t=n["b"].extractDate(e.data,"DD/MM/YYYY");return e.data=a["a"].firestore.Timestamp.fromDate(t),e.entrata=l(e.entrata),e.uscita=l(e.uscita),e},s=e=>(e.value=l(e.value),e),l=e=>(e="string"===typeof e?Number(e.replace(",",".")):e,e=Number.isNaN(e)?0:e,e),c=(e,t=!1)=>{i["a"].create({message:e,color:t?"negative":"primary"})}}});