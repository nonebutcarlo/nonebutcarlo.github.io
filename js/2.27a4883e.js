(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"2f3a":function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",[i("div",{staticClass:"row q-ma-lg justify-start"},[i("div",{staticClass:"text-primary text-start text-h5 q-mr-md"},[t._v("\n      Saldo\n    ")]),i("div",{staticClass:"text-start text-h5",class:t.saldo>0?"text-positive":"text-negative"},[t._v("\n      "+t._s(t.currency(t.saldo))+"\n    ")]),i("q-space"),i("q-btn",{attrs:{icon:"add",rounded:"",color:"primary"},on:{click:function(e){t.showAdd=!t.showAdd}}})],1),i("div",{staticClass:"q-ma-sm"},[i("q-list",{attrs:{separator:""}},t._l(t.movimentiArray,(function(e){return i("q-slide-item",{key:e.id,attrs:{"left-color":"orange","right-color":"red"},on:{right:function(i){return t.slideDelete(i,e)},left:function(i){return t.slideEdit(i,e)}},scopedSlots:t._u([{key:"left",fn:function(){return[i("q-icon",{attrs:{name:"edit"}})]},proxy:!0},{key:"right",fn:function(){return[i("q-icon",{attrs:{name:"delete"}})]},proxy:!0}],null,!0)},[i("q-item",[i("q-item-section",{attrs:{avatar:""}},[i("q-badge",{attrs:{color:"primary text-center"},domProps:{innerHTML:t._s(t.splitData(e.data))}})],1),i("q-item-section",{},[i("q-item-label",[t._v(t._s(e.tipo))]),i("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e.descrizione)+" ")])],1),i("q-item-section",{attrs:{side:""}},[i("div",{staticClass:"text-primary"},[i("q-btn",{attrs:{flat:"",dense:"",size:"sm",round:"",icon:"edit"},on:{click:function(i){return t.editMovimento(e)}}}),i("q-btn",{attrs:{flat:"",dense:"",size:"sm",round:"",icon:"delete"},on:{click:function(i){return t.deleteMovimento(e)}}})],1),i("q-badge",{staticClass:"text-weight-bold",attrs:{color:e.entrata-e.uscita>0?"positive":"negative"}},[t._v(t._s(t.currency(e.entrata-e.uscita))+" ")])],1)],1)],1)})),1),i("div",{staticClass:"text-center"},[i("q-btn",{staticClass:"q-mt-lg justify-center",attrs:{flat:"",color:"primary"},on:{click:t.mostraAltri}},[t._v(t._s(t.reset||t.limiteRaggiunto?"Ripristina":"Mostra Altri"))])],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.showAdd,callback:function(e){t.showAdd=e},expression:"showAdd"}},[i("showAdd-dialog",{attrs:{title:"Aggiungi Movimento"},on:{movimento:t.aggiungiMovimento,close:function(e){t.showAdd=!1}}})],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.showEdit,callback:function(e){t.showEdit=e},expression:"showEdit"}},[i("showAdd-dialog",{attrs:{title:"Modifica Movimento",editMovimento:this.movToEdit},on:{close:function(e){t.showEdit=!1},movimento:t.aggiornaMovimento}})],1)],1)},a=[],n=(i("4e82"),i("ded3")),s=i.n(n),r=i("2f62"),l=i("bd4c"),c=(i("436b"),i("4506")),m={name:"ListaMovimenti",data(){return{showAdd:!1,showEdit:!1,movToEdit:null,confirm:!1,reset:!1}},mounted(){this.firestoreGetMovimenti().then((t=>Object(c["b"])(t))).catch((t=>{Object(c["b"])(t,!0),this.$router.push({name:"home"}).catch((()=>{}))})),this.firestoreGetTipi()},destroyed(){this.firestoreStopGettingMovimenti(),this.firestoreStopGettingTipi()},computed:s()(s()(s()({},Object(r["d"])("movimenti",["movimenti","limite"])),Object(r["c"])("auth",["saldo"])),{},{movimentiArray(){return Object.values(this.movimenti).sort(((t,e)=>t.data===e.data?0:t.data<e.data?1:-1))},limiteRaggiunto(){return this.movimentiArray.length<this.limite}}),methods:s()(s()(s()({},Object(r["b"])("movimenti",["firestoreGetMovimenti","firestoreStopGettingMovimenti","firestoreSaveMovimento","firestoreAggiornaMovimento","firestoreDeleteMovimento","incrementLimite"])),Object(r["b"])("tipi",["firestoreSaveTipo","firestoreGetTipi","firestoreStopGettingTipi"])),{},{currency(t){return new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(t)},splitData(t){return l["b"].formatDate(t,"DD")+"<br>"+l["b"].formatDate(t,"MMM")+"<br>"+l["b"].formatDate(t,"YYYY")},formattaData(t){return l["b"].formatDate(t,"DD/MM/YYYY")},aggiornaMovimento(t){this.movToEdit=null,this.firestoreAggiornaMovimento(t).then((t=>Object(c["b"])(t))).catch((t=>Object(c["b"])(t,!0)))},aggiungiMovimento(t){this.firestoreSaveMovimento(t).then((t=>Object(c["b"])(t))).catch((t=>Object(c["b"])(t,!0)))},slideEdit({reset:t},e){this.editMovimento(e),t()},editMovimento(t){const e=s()({},t);this.movToEdit=e,this.movToEdit.data=this.formattaData(this.movToEdit.data),this.showEdit=!0},slideDelete({reset:t},e){this.deleteMovimento(e),t()},deleteMovimento(t){this.$q.dialog({persistent:!0,message:"Rimuovo il movimento definitivamente?",ok:{label:"Rimuovi",color:"negative"},cancel:{label:"Annulla"}}).onOk((()=>{this.firestoreDeleteMovimento(t.id).then((t=>Object(c["b"])(t))).catch((t=>Object(c["b"])(t,!0)))}))},mostraAltri(){let t=this.movimentiArray.length;this.incrementLimite(this.reset).then((()=>{let e=this.movimentiArray.length;e===t||this.limiteRaggiunto?this.reset=!0:this.reset=!1}))}}),components:{"showAdd-dialog":i("ea22").default}},d=m,p=i("2877"),u=i("9989"),v=i("2c91"),f=i("9c40"),h=i("1c1c"),b=i("de1d"),g=i("0016"),q=i("66e5"),y=i("4074"),M=i("58a81"),x=i("0170"),w=i("24e8"),D=i("eebe"),k=i.n(D),A=Object(p["a"])(d,o,a,!1,null,null,null);e["default"]=A.exports;k()(A,"components",{QPage:u["a"],QSpace:v["a"],QBtn:f["a"],QList:h["a"],QSlideItem:b["a"],QIcon:g["a"],QItem:q["a"],QItemSection:y["a"],QBadge:M["a"],QItemLabel:x["a"],QDialog:w["a"]})},ea22:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-card",{staticClass:"full-width"},[i("q-card-section",[i("div",{staticClass:"text-h6 q-mb-lg"},[t._v(t._s(t.title)+" ")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{ref:"formDati",attrs:{dense:""},on:{submit:function(e){return e.preventDefault(),t.inviaDati(e)},reset:t.onReset}},[i("q-input",{staticClass:"q-mb-sm",attrs:{outlined:"",required:""},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[i("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[i("q-date",{attrs:{"today-btn":"",mask:"DD/MM/YYYY"},model:{value:t.movimento.data,callback:function(e){t.$set(t.movimento,"data",e)},expression:"movimento.data"}},[i("div",{staticClass:"row items-center justify-end"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.movimento.data,callback:function(e){t.$set(t.movimento,"data",e)},expression:"movimento.data"}}),i("q-select",{staticClass:"col q-mb-sm ",attrs:{outlined:"","use-input":"","input-debounce":"0",options:t.tipiOptions,label:"Tipo",rules:[t.myRule],"hide-bottom-space":"",clearable:""},on:{filter:t.filterFn},scopedSlots:t._u([{key:"no-option",fn:function(){return[i("q-item",[i("q-item-section",{staticClass:"text-grey"},[t._v("\n              Nessun risultato\n            ")])],1)]},proxy:!0},{key:"append",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:function(e){e.stopPropagation(),t.prompt=!0}}})]},proxy:!0}]),model:{value:t.movimento.tipo,callback:function(e){t.$set(t.movimento,"tipo",e)},expression:"movimento.tipo"}}),i("q-input",{staticClass:"col q-mb-sm",attrs:{label:"Descrizione",outlined:"",clearable:""},model:{value:t.movimento.descrizione,callback:function(e){t.$set(t.movimento,"descrizione",e)},expression:"movimento.descrizione"}}),i("q-input",{staticClass:"col q-mb-sm",attrs:{label:"Entrata",outlined:"",clearable:""},model:{value:t.movimento.entrata,callback:function(e){t.$set(t.movimento,"entrata",e)},expression:"movimento.entrata"}}),i("q-input",{staticClass:"col q-mb-sm",attrs:{label:"Uscita",outlined:"",clearable:""},model:{value:t.movimento.uscita,callback:function(e){t.$set(t.movimento,"uscita",e)},expression:"movimento.uscita"}}),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Annulla",outline:"",color:"primary"}}),i("q-btn",{attrs:{type:"submit",unelevated:"",label:"Salva",color:"primary"}})],1)],1)],1),i("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[i("q-card",{staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6"},[t._v("Nuovo Tipo")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{attrs:{dense:"",autofocus:""},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.addTipo(),t.prompt=!1}},model:{value:t.nuovoTipo,callback:function(e){t.nuovoTipo=e},expression:"nuovoTipo"}})],1),i("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Annulla"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Aggiungi Tipo"},on:{click:t.addTipo}})],1)],1)],1)],1)},a=[],n=(i("c975"),i("4e82"),i("ded3")),s=i.n(n),r=i("bd4c"),l=i("2f62"),c={name:"DialogAddEdit",computed:s()(s()({},Object(l["d"])("tipi",["tipi"])),{},{tipiArray(){return Object.values(this.tipi).map((t=>t.nome)).sort()}}),data(){return{oggi:new Date,movimento:this.editMovimento||{tipo:null,descrizione:"",data:r["b"].formatDate(Date.now(),"DD/MM/YYYY"),entrata:"",uscita:""},prompt:!1,nuovoTipo:"",tipiOptions:this.tipiArray}},props:{title:{type:String,default:"Missing"},editMovimento:{type:Object,default:null}},methods:s()(s()({},Object(l["b"])("tipi",["firestoreSaveTipo"])),{},{onReset(){},myRule(t){if(null===t)return"Devi selezionare un elemento"},inviaDati(){this.$refs.formDati.validate().then((t=>{t&&(this.$emit("movimento",this.movimento),this.$emit("close"))}))},filterFn(t,e){e(""!==t?()=>{const e=t.toLowerCase();this.tipiOptions=this.tipiArray.filter((t=>t.toLowerCase().indexOf(e)>-1))}:()=>{this.tipiOptions=this.tipiArray})},addTipo(){this.firestoreSaveTipo(this.nuovoTipo).then((()=>{this.movimento.tipo=this.nuovoTipo,this.nuovoTipo="",this.tipiOptions=this.tipiArray}))}})},m=c,d=i("2877"),p=i("f09f"),u=i("a370"),v=i("0378"),f=i("27f9"),h=i("0016"),b=i("7cbe"),g=i("52ee"),q=i("9c40"),y=i("ddd8"),M=i("66e5"),x=i("4074"),w=i("4b7e"),D=i("24e8"),k=i("7f67"),A=i("eebe"),C=i.n(A),T=Object(d["a"])(m,o,a,!1,null,null,null);e["default"]=T.exports;C()(T,"components",{QCard:p["a"],QCardSection:u["a"],QForm:v["a"],QInput:f["a"],QIcon:h["a"],QPopupProxy:b["a"],QDate:g["a"],QBtn:q["a"],QSelect:y["a"],QItem:M["a"],QItemSection:x["a"],QCardActions:w["a"],QDialog:D["a"]}),C()(T,"directives",{ClosePopup:k["a"]})}}]);