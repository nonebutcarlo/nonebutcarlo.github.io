(function(e){function t(t){for(var a,i,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,l||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,i=1;i<o.length;i++){var c=o[i];0!==n[c]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=o[0]))}return e}var a={},n={1:0},r=[];function i(e){return s.p+"js/"+({}[e]||e)+"."+{2:"27a4883e",3:"6616f06d",4:"ab096321",5:"76b12da6",6:"15cb3b24"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.e=function(e){var t=[],o=n[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,a){o=n[e]=[t,a]}));t.push(o[2]=a);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var o=n[e];if(0!==o){if(o){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,o[1](l)}n[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(o,a,function(t){return e[t]}.bind(null,a));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;r.push([0,0]),o()})({0:function(e,t,o){e.exports=o("2f39")},"2f39":function(e,t,o){"use strict";o.r(t);o("e6cf"),o("5319"),o("7d6e"),o("e54f"),o("985d"),o("31cd");var a=o("2b0e"),n=o("a745"),r=o("42d2"),i=o("b05d"),s=o("436b"),c=o("2a19"),l=o("1b3f");a["a"].use(i["a"],{config:{loadingBar:{color:"warning",size:"4px"}},lang:n["a"],iconSet:r["a"],plugins:{Dialog:s["a"],Notify:c["a"],LoadingBar:l["a"]}});var u=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"q-app"}},[o("router-view")],1)},d=[],m=o("ded3"),p=o.n(m),h=o("2f62"),f=o("260b"),g={methods:p()(p()({},Object(h["b"])("auth",["handleAuthStateChanged","logoutUser"])),Object(h["b"])("movimenti",["firestoreStopGettingMovimenti"])),mounted(){f["a"].auth().setPersistence(f["a"].auth.Auth.Persistence.SESSION).then((()=>this.handleAuthStateChanged())).catch((e=>console.error(e.message)))},beforeDestroy(){this.firestoreStopGettingMovimenti()}},v=g,b=o("2877"),w=Object(b["a"])(v,u,d,!1,null,null,null),y=w.exports,S=(o("ea7b"),o("e71f"),{apiKey:"AIzaSyC-YNdahqcU3YSBeDv3bbALyKTU5IUrPyY",authDomain:"account-manager-25e69.firebaseapp.com",projectId:"account-manager-25e69",storageBucket:"account-manager-25e69.appspot.com",messagingSenderId:"28082462276",appId:"1:28082462276:web:2da1066ebfc3ddd9e3a611"});const P=f["a"].initializeApp(S),M=P.auth(),D=P.firestore();let O=null;const j={userDetails:{}},I={setUserDetails(e,t){e.userDetails=t},updateUser(e,t){Object.assign(e.userDetails,t)}},U={registerUser({},e){return new Promise(((t,o)=>{M.createUserWithEmailAndPassword(e.email,e.password).then((a=>{let n=M.currentUser.uid;D.collection("users").doc(n).set({nome:e.nome,email:e.email,saldo:0}).then((()=>t("Registrazione effettuata con successo"))).catch((e=>o(e.message)))})).catch((e=>o(e.message)))}))},loginUser({},e){return new Promise(((t,o)=>{M.signInWithEmailAndPassword(e.email,e.password).then((e=>t("Accesso effettuato"))).catch((e=>o(e.message)))}))},logoutUser({}){M.signOut()},handleAuthStateChanged({commit:e}){M.onAuthStateChanged((t=>{if(t){let t=M.currentUser.uid;D.collection("users").doc(t).get().then((o=>{if(o.exists){const a=o.data();e("setUserDetails",{nome:a.nome,email:a.email,userId:t,saldo:a.saldo}),this.$router.push({name:"listaMovimenti"}).catch((()=>{}))}})).catch((e=>console.log(e.message)))}else e("setUserDetails",{}),O&&O(),this.$router.replace("/auth").catch((()=>{}))}))},updateSaldo({commit:e,state:t}){let o=M.currentUser.uid;D.collection("users").doc(o).get().then((t=>e("updateUser",t.data()))).catch((e=>console.log("Errore nell'aggiornamento saldo")))}},T={isLoggedIn(e){return e.userDetails.userId},saldo(e){return e.userDetails.saldo}};var A={namespaced:!0,state:j,mutations:I,actions:U,getters:T},G=o("4506");let L=null,x=null;const E=10,N={movimenti:{},limite:E},C={addMovimento(e,t){a["a"].set(e.movimenti,t.movimentoId,t.movimentoDetails)},updateMovimento(e,t){Object.assign(e.movimenti[t.movimentoId],t.movimentoDetails)},deleteMovimento(e,t){a["a"].delete(e.movimenti,t)},clearMovimenti(e){e.movimenti={},L=null,x=null},setLimite(e,t){e.limite=t},resetLimite(e){e.limite=1}},_={firestoreGetMovimenti({state:e,commit:t,rootGetters:o}){return new Promise(((a,n)=>{const r=o["auth/isLoggedIn"];L=D.collection("users").doc(r).collection("movimenti").orderBy("data","desc").limit(e.limite),x=L.onSnapshot((e=>{e.empty||e.forEach((e=>{const o=e.id;let n=e.data();n.data=e.data().data.toDate(),n.id=o,t("addMovimento",{movimentoId:o,movimentoDetails:n}),a("Dati recuperati")}),(e=>{n(e.message)}))}))}))},firestoreStopGettingMovimenti({commit:e}){x&&(x(),e("clearMovimenti"),e("resetLimite"))},firestoreSaveMovimento({rootGetters:e,dispatch:t},o){return new Promise(((a,n)=>{let r=M.currentUser.uid,i=o;i=Object(G["a"])(i);const s=i.entrata-i.uscita,c=e["auth/saldo"],l=c+s;D.collection("users").doc(r).collection("movimenti").add(i).then((()=>{D.collection("users").doc(r).update({saldo:l}).then((()=>{t("auth/updateSaldo",null,{root:!0}),a("Movimento salvato")})).catch((e=>n(e.message)))})).catch((e=>n(e.message)))}))},firestoreAggiornaMovimento({state:e,rootGetters:t,dispatch:o},a){return new Promise(((n,r)=>{let i=M.currentUser.uid,s=a;const c=s.id,l=e.movimenti[c],u=l.entrata-l.uscita;s=Object(G["a"])(s);const d=s.entrata-s.uscita,m=t["auth/saldo"],p=m-u+d;D.collection("users").doc(i).collection("movimenti").doc(c).update(s).then((()=>{D.collection("users").doc(i).update({saldo:p}).then((()=>{o("auth/updateSaldo",null,{root:!0}),n("Movimento aggiornato")})).catch((e=>r(e.message)))})).catch((e=>r(e.message)))}))},firestoreDeleteMovimento({commit:e,state:t,rootGetters:o,dispatch:a},n){return new Promise(((r,i)=>{let s=M.currentUser.uid;const c=t.movimenti[n],l=c.entrata-c.uscita,u=o["auth/saldo"],d=u-l;D.collection("users").doc(s).collection("movimenti").doc(n).delete().then((t=>{D.collection("users").doc(s).update({saldo:d}).then((()=>{e("deleteMovimento",n),a("auth/updateSaldo",null,{root:!0}),r("Movimento Cancellato")})).catch((e=>i(e.message)))})).catch((e=>i(e.message)))}))},incrementLimite({state:e,commit:t,dispatch:o},a){return new Promise(((n,r)=>{const i=a?E:e.limite+E;o("firestoreStopGettingMovimenti"),t("setLimite",i),o("firestoreGetMovimenti").then((()=>{n()})).catch((()=>{r()}))}))}},B={};var Y={namespaced:!0,state:N,mutations:C,actions:_,getters:B};let q=null,k=null;const z={tipi:{}},V={addTipo(e,t){a["a"].set(e.tipi,t.tipoId,t.tipoDetails)},updateTipo(e,t){Object.assign(e.tipo[t.tipoId],t.tipoDetails)},deleteTipo(e,t){a["a"].delete(e.tipi,t.tipoId)},clearTipi(e){e.tipi={},q=null,k=null}},$={firestoreGetTipi({commit:e,rootGetters:t}){const o=t["auth/isLoggedIn"];q=D.collection("users").doc(o).collection("tipi").orderBy("nome"),k=q.onSnapshot((t=>{t.empty||t.forEach((t=>{const o=t.id;let a=t.data();e("addTipo",{tipoId:o,tipoDetails:a})}))}))},firestoreStopGettingTipi({commit:e}){k&&(k(),e("clearTipi"))},firestoreSaveTipo({},e){let t=M.currentUser.uid;const o={nome:e};D.collection("users").doc(t).collection("tipi").add(o).then((e=>Object(G["b"])("Tipo Salvato"))).catch((e=>Object(G["b"])(e.message)))}},J={};var K={namespaced:!0,state:z,mutations:V,actions:$,getters:J};a["a"].use(h["a"]);var W=function(){const e=new h["a"].Store({modules:{auth:A,movimenti:Y,tipi:K},strict:!1});return e},Q=o("8c4f");const R=[{path:"/",component:()=>Promise.all([o.e(0),o.e(4)]).then(o.bind(null,"713b")),children:[{path:"",component:()=>Promise.all([o.e(0),o.e(6)]).then(o.bind(null,"8b24")),name:"home"},{path:"/auth",component:()=>Promise.all([o.e(0),o.e(3)]).then(o.bind(null,"f724")),name:"auth"},{path:"/listaMovimenti",component:()=>Promise.all([o.e(0),o.e(2)]).then(o.bind(null,"2f3a")),name:"listaMovimenti",meta:{requiresAuth:!0}}]},{path:"*",component:()=>Promise.all([o.e(0),o.e(5)]).then(o.bind(null,"e51e"))}];var F=R;a["a"].use(Q["a"]);var H=function(){const e=new Q["a"]({scrollBehavior:()=>({x:0,y:0}),routes:F,mode:"history",base:"/"});return e},X=async function(){const e="function"===typeof W?await W({Vue:a["a"]}):W,t="function"===typeof H?await H({Vue:a["a"],store:e}):H;e.$router=t;const o={router:t,store:e,render:e=>e(y),el:"#q-app"};return{app:o,store:e,router:t}},Z=({router:e,store:t,Vue:o})=>{e.beforeEach(((e,o,a)=>{const n=t.getters["auth/isLoggedIn"];e.matched.some((e=>e.meta.requiresAuth))&&!n?a({name:"auth",replace:!0}):a()}))};const ee="/";async function te(){const{app:e,store:t,router:o}=await X();let n=!1;const r=e=>{n=!0;const t=Object(e)===e?o.resolve(e).route.fullPath:e;window.location.href=t},i=window.location.href.replace(window.location.origin,""),s=[Z,void 0];for(let l=0;!1===n&&l<s.length;l++)if("function"===typeof s[l])try{await s[l]({app:e,router:o,store:t,Vue:a["a"],ssrContext:null,redirect:r,urlPath:i,publicPath:ee})}catch(c){return c&&c.url?void(window.location.href=c.url):void console.error("[Quasar] boot error:",c)}!0!==n&&new a["a"](e)}te()},"31cd":function(e,t,o){},4506:function(e,t,o){"use strict";o.d(t,"a",(function(){return i})),o.d(t,"b",(function(){return s}));var a=o("260b"),n=o("bd4c"),r=o("2a19");const i=e=>{delete e.id;const t=n["b"].extractDate(e.data,"DD/MM/YYYY");return e.data=a["a"].firestore.Timestamp.fromDate(t),e.entrata=Number(e.entrata),e.entrata=Number.isNaN(e.entrata)?0:e.entrata,e.uscita=Number(e.uscita),e.uscita=Number.isNaN(e.uscita)?0:e.uscita,e},s=(e,t=!1)=>{r["a"].create({message:e,color:t?"negative":"primary"})}}});