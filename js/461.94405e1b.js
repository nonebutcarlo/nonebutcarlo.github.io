"use strict";(globalThis["webpackChunkaccount_manager"]=globalThis["webpackChunkaccount_manager"]||[]).push([[461],{9941:(e,t,a)=>{a.d(t,{Z:()=>W});var l=a(9835),o=a(6970),i=a(1957);const d={class:"text-h6 q-mb-lg"};function s(e,t,a,s,n,r){const u=(0,l.up)("q-card-section"),m=(0,l.up)("q-input"),c=(0,l.up)("q-btn"),h=(0,l.up)("q-card-actions"),p=(0,l.up)("q-form"),g=(0,l.up)("q-card"),f=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(g,{class:"full-width"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l._)("div",d,(0,o.zw)(a.title),1)])),_:1}),(0,l.Wm)(u,{class:"q-pt-none"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{onSubmit:(0,i.iM)(r.inviaDati,["prevent"]),onReset:r.onReset,ref:"formDati",dense:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"col q-mb-sm",modelValue:n.saldo.nome,"onUpdate:modelValue":t[0]||(t[0]=e=>n.saldo.nome=e),label:"Nome",outlined:"",clearable:""},null,8,["modelValue"]),(0,l.Wm)(m,{class:"col q-mb-sm",modelValue:n.saldo.value,"onUpdate:modelValue":t[1]||(t[1]=e=>n.saldo.value=e),label:"Importo",outlined:"",clearable:""},null,8,["modelValue"]),(0,l.Wm)(h,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(c,{label:"Annulla",outline:"",color:"primary"},null,512),[[f]]),(0,l.Wm)(c,{type:"submit",unelevated:"",label:"Salva",color:"primary"})])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})}a(4170);const n={name:"DialogAddEditSaldi",computed:{},data(){return{oggi:new Date,saldo:this.editSaldo||{nome:"",value:""},prompt:!1}},props:{title:{type:String,default:"Missing"},editSaldo:{type:Object,default:null}},methods:{onReset(){},inviaDati(){this.$refs.formDati.validate().then((e=>{e&&(this.$emit("saldo",this.saldo),this.$emit("close"))}))}}};var r=a(1639),u=a(4458),m=a(3190),c=a(8326),h=a(6611),p=a(1821),g=a(4455),f=a(2146),w=a(9984),S=a.n(w);const v=(0,r.Z)(n,[["render",s]]),W=v;S()(n,"components",{QCard:u.Z,QCardSection:m.Z,QForm:c.Z,QInput:h.Z,QCardActions:p.Z,QBtn:g.Z}),S()(n,"directives",{ClosePopup:f.Z})},4461:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var l=a(9835),o=a(6970);const i={class:"row q-mx-lg q-mt-lg justify-start"},d=(0,l._)("div",{class:"text-primary text-start text-h5 q-mr-md"},"Personale",-1),s={class:"row q-mx-lg q-mb-lg justify-start"},n=(0,l._)("div",{class:"text-primary text-start text-body1 q-mr-md"},"Totale",-1),r={class:"q-ma-sm"},u={class:"text-primary"};function m(e,t,a,m,c,h){const p=(0,l.up)("q-space"),g=(0,l.up)("q-btn"),f=(0,l.up)("q-icon"),w=(0,l.up)("q-badge"),S=(0,l.up)("q-item-section"),v=(0,l.up)("q-item-label"),W=(0,l.up)("q-item"),b=(0,l.up)("q-slide-item"),q=(0,l.up)("q-list"),_=(0,l.up)("showAdd-dialog"),y=(0,l.up)("q-dialog"),Z=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(Z,null,{default:(0,l.w5)((()=>[(0,l._)("div",i,[d,(0,l._)("div",{class:(0,o.C_)(["text-start text-h5",e.saldoPersonale>0?"text-positive":"text-negative"])},(0,o.zw)(h.currency(e.saldoPersonale)),3),(0,l.Wm)(p),(0,l.Wm)(g,{class:"",icon:"add",rounded:"",color:"primary",onClick:t[0]||(t[0]=e=>c.showAdd=!c.showAdd)})]),(0,l._)("div",s,[n,(0,l._)("div",{class:(0,o.C_)(["text-start text-body1",e.saldoTotale>0?"text-positive":"text-negative"])},(0,o.zw)(h.currency(e.saldoTotale)),3)]),(0,l._)("div",r,[(0,l.Wm)(q,{separator:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(h.saldiArray,(e=>((0,l.wg)(),(0,l.j4)(b,{onRight:t=>h.slideDelete(t,e),onLeft:t=>h.slideEdit(t,e),"left-color":"orange","right-color":"red",key:e.id,style:{}},{left:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"edit"})])),right:(0,l.w5)((()=>[(0,l.Wm)(f,{name:"delete"})])),default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{color:"primary text-center",innerHTML:h.splitData(e.data)},null,8,["innerHTML"])])),_:2},1024),(0,l.Wm)(S,{class:""},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.nome),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(S,{class:"",side:""},{default:(0,l.w5)((()=>[(0,l._)("div",u,[(0,l.Wm)(g,{flat:"",dense:"",size:"sm",round:"",icon:"edit",onClick:t=>h.editSaldo(e)},null,8,["onClick"]),(0,l.Wm)(g,{flat:"",dense:"",size:"sm",round:"",icon:"delete",onClick:t=>h.deleteSaldo(e)},null,8,["onClick"])]),(0,l.Wm)(w,{class:"text-weight-bold",color:e.value>0?"positive":"negative"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(h.currency(e.value)),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onRight","onLeft"])))),128))])),_:1})]),(0,l.Wm)(y,{modelValue:c.showAdd,"onUpdate:modelValue":t[2]||(t[2]=e=>c.showAdd=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{title:"Aggiungi Saldo",onSaldo:h.aggiungiSaldo,onClose:t[1]||(t[1]=e=>c.showAdd=!1)},null,8,["onSaldo"])])),_:1},8,["modelValue"]),(0,l.Wm)(y,{modelValue:c.showEdit,"onUpdate:modelValue":t[4]||(t[4]=e=>c.showEdit=e),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{title:"Modifica Saldo",editSaldo:this.salToEdit,onClose:t[3]||(t[3]=e=>c.showEdit=!1),onSaldo:h.aggiornaSaldo},null,8,["editSaldo","onSaldo"])])),_:1},8,["modelValue"])])),_:1})}a(2879);var c=a(3100),h=a(4170),p=(a(2100),a(6283));const g={name:"ListaSaldi",data(){return{showAdd:!1,showEdit:!1,salToEdit:null,confirm:!1,reset:!1}},mounted(){this.firestoreGetSaldi().then((e=>(0,p.hW)(e))).catch((e=>{(0,p.hW)(e,!0),this.$router.push({name:"home"}).catch((()=>{}))}))},unmounted(){this.firestoreStopGettingSaldi()},computed:{...(0,c.rn)("saldi",["saldi"]),...(0,c.Se)("auth",["saldoPersonale","saldoTotale"]),saldiArray(){return Object.values(this.saldi).sort(((e,t)=>e.nome===t.nome?0:e.nome<t.nome?1:-1))}},methods:{...(0,c.nv)("saldi",["firestoreGetSaldi","firestoreStopGettingSaldi","firestoreSaveSaldo","firestoreAggiornaSaldo","firestoreDeleteSaldo"]),currency(e){return new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e)},splitData(e){return h.ZP.formatDate(e,"DD")+"<br>"+h.ZP.formatDate(e,"MMM")+"<br>"+h.ZP.formatDate(e,"YYYY")},formattaData(e){return h.ZP.formatDate(e,"DD/MM/YYYY")},aggiornaSaldo(e){this.salToEdit=null,e.data=new Date,this.firestoreAggiornaSaldo(e).then((e=>(0,p.hW)(e))).catch((e=>(0,p.hW)(e,!0)))},aggiungiSaldo(e){e.data=new Date,this.firestoreSaveSaldo(e).then((e=>(0,p.hW)(e))).catch((e=>(0,p.hW)(e,!0)))},slideEdit({reset:e},t){this.editSaldo(t),e()},editSaldo(e){const t={...e};this.salToEdit=t,this.showEdit=!0},slideDelete({reset:e},t){this.deleteSaldo(t),e()},deleteSaldo(e){this.$q.dialog({persistent:!0,message:"Rimuovo il saldo definitivamente?",ok:{label:"Rimuovi",color:"negative"},cancel:{label:"Annulla"}}).onOk((()=>{this.firestoreDeleteSaldo(e.id).then((e=>(0,p.hW)(e))).catch((e=>(0,p.hW)(e,!0)))}))}},components:{"showAdd-dialog":a(9941).Z}};var f=a(1639),w=a(9885),S=a(136),v=a(4455),W=a(3246),b=a(8713),q=a(2857),_=a(490),y=a(6749),Z=a(990),D=a(3115),x=a(7743),Q=a(9984),A=a.n(Q);const C=(0,f.Z)(g,[["render",m]]),k=C;A()(g,"components",{QPage:w.Z,QSpace:S.Z,QBtn:v.Z,QList:W.Z,QSlideItem:b.Z,QIcon:q.Z,QItem:_.Z,QItemSection:y.Z,QBadge:Z.Z,QItemLabel:D.Z,QDialog:x.Z})}}]);